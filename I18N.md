# Internationalization (i18n) Documentation

## Overview

The html5-qrcode library now supports internationalization (i18n), allowing you to display the UI in multiple languages. The library comes with built-in support for English and Japanese, and you can easily add support for additional languages.

## Supported Languages

Currently supported locales:
- **English** (`en`) - Default
- **Japanese** (`ja`)
- Spanish (`es`) - Coming soon
- French (`fr`) - Coming soon
- German (`de`) - Coming soon
- Chinese Simplified (`zh-CN`) - Coming soon
- Chinese Traditional (`zh-TW`) - Coming soon
- Korean (`ko`) - Coming soon
- Italian (`it`) - Coming soon
- Portuguese (`pt`) - Coming soon
- Russian (`ru`) - Coming soon
- Arabic (`ar`) - Coming soon
- Hindi (`hi`) - Coming soon

## Basic Usage

### Setting the Locale

```javascript
import { Html5QrcodeScanner } from "html5-qrcode";
import { I18nManager, SupportedLocales } from "html5-qrcode";

// Set locale to Japanese
I18nManager.setLocale(SupportedLocales.JA);

// Now create the scanner - it will use Japanese text
const html5QrcodeScanner = new Html5QrcodeScanner(
  "reader",
  { fps: 10, qrbox: {width: 250, height: 250} },
  false
);
```

### Auto-detect Browser Language

```javascript
import { I18nManager } from "html5-qrcode";

// Automatically detect and set the browser's language
I18nManager.detectAndSetLocale();
```

### Get Current Locale

```javascript
import { I18nManager } from "html5-qrcode";

const currentLocale = I18nManager.getLocale();
console.log(`Current locale: ${currentLocale}`);
```

## Advanced Usage

### Adding a New Language

You can add support for a new language by providing a complete translation object:

```javascript
import { I18nManager, SupportedLocales } from "html5-qrcode";

const spanishTranslations = {
  html5Qrcode: {
    codeParseError: "Error al analizar código QR, error = {error}",
    errorGettingUserMedia: "Error al obtener userMedia, error = {error}",
    // ... add all other translations
  },
  html5QrcodeScanner: {
    scanningStatus: "Escaneando",
    idleStatus: "Inactivo",
    // ... add all other translations
  },
  libraryInfo: {
    poweredBy: "Desarrollado por ",
    reportIssues: "Reportar problemas"
  }
};

// Register the new locale
I18nManager.addLocale(SupportedLocales.ES, spanishTranslations);

// Now you can use it
I18nManager.setLocale(SupportedLocales.ES);
```

### Customizing Existing Translations

You can override specific translations for any locale:

```javascript
import { I18nManager, SupportedLocales } from "html5-qrcode";

// Override specific English translations
I18nManager.registerTranslations(SupportedLocales.EN, {
  html5QrcodeScanner: {
    scanButtonStartScanningText: "Begin Scanning",
    scanButtonStopScanningText: "End Scanning"
  }
});
```

### Direct Translation Access

You can also access translations directly if needed:

```javascript
import { I18nManager } from "html5-qrcode";

// Get a simple translation
const status = I18nManager.translate('html5QrcodeScanner.scanningStatus');

// Get a translation with parameters
const error = I18nManager.translate('html5Qrcode.codeParseError', {
  error: 'Invalid format'
});
```

## Complete Example

Here's a complete example showing how to use i18n with the scanner:

```html
<!DOCTYPE html>
<html>
<head>
  <title>QR Code Scanner with i18n</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <div>
    <label for="language">Select Language:</label>
    <select id="language" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="ja">日本語</option>
    </select>
  </div>
  <div id="reader"></div>

  <script>
    const { Html5QrcodeScanner, I18nManager, SupportedLocales } = window.Html5Qrcode;

    let scanner = null;

    function changeLanguage() {
      const lang = document.getElementById('language').value;
      
      // Stop existing scanner if any
      if (scanner) {
        scanner.clear();
      }

      // Set the new locale
      I18nManager.setLocale(lang === 'ja' ? SupportedLocales.JA : SupportedLocales.EN);

      // Create new scanner with the new language
      initScanner();
    }

    function initScanner() {
      scanner = new Html5QrcodeScanner(
        "reader",
        { 
          fps: 10, 
          qrbox: { width: 250, height: 250 }
        },
        false
      );

      scanner.render(onScanSuccess, onScanFailure);
    }

    function onScanSuccess(decodedText, decodedResult) {
      console.log(`Code matched = ${decodedText}`, decodedResult);
    }

    function onScanFailure(error) {
      // Handle scan failure
    }

    // Initialize with browser language
    I18nManager.detectAndSetLocale();
    initScanner();
  </script>
</body>
</html>
```

## Translation Template

If you want to contribute a new language, use this template:

```typescript
import { Translations } from "../types";

export const [languageCode]: Translations = {
  html5Qrcode: {
    codeParseError: "QR code parse error, error = {error}",
    errorGettingUserMedia: "Error getting userMedia, error = {error}",
    onlyDeviceSupportedError: "[Your translation here]",
    cameraStreamingNotSupported: "[Your translation here]",
    unableToQuerySupportedDevices: "[Your translation here]",
    insecureContextCameraQueryError: "[Your translation here]",
    scannerPaused: "[Your translation here]"
  },
  html5QrcodeScanner: {
    scanningStatus: "[Your translation here]",
    idleStatus: "[Your translation here]",
    errorStatus: "[Your translation here]",
    permissionStatus: "[Your translation here]",
    noCameraFoundErrorStatus: "[Your translation here]",
    lastMatch: "Last Match: {decodedText}",
    codeScannerTitle: "[Your translation here]",
    cameraPermissionTitle: "[Your translation here]",
    cameraPermissionRequesting: "[Your translation here]",
    noCameraFound: "[Your translation here]",
    scanButtonStopScanningText: "[Your translation here]",
    scanButtonStartScanningText: "[Your translation here]",
    torchOnButton: "[Your translation here]",
    torchOffButton: "[Your translation here]",
    torchOnFailedMessage: "[Your translation here]",
    torchOffFailedMessage: "[Your translation here]",
    scanButtonScanningStarting: "[Your translation here]",
    textIfCameraScanSelected: "[Your translation here]",
    textIfFileScanSelected: "[Your translation here]",
    selectCamera: "[Your translation here]",
    fileSelectionChooseImage: "[Your translation here]",
    fileSelectionChooseAnother: "[Your translation here]",
    fileSelectionNoImageSelected: "[Your translation here]",
    anonymousCameraPrefix: "[Your translation here]",
    dragAndDropMessage: "[Your translation here]",
    dragAndDropMessageOnlyImages: "[Your translation here]",
    zoom: "[Your translation here]",
    loadingImage: "[Your translation here]",
    cameraScanAltText: "[Your translation here]",
    fileScanAltText: "[Your translation here]"
  },
  libraryInfo: {
    poweredBy: "[Your translation here]",
    reportIssues: "[Your translation here]"
  }
};
```

## Contributing Translations

We welcome contributions of new language translations! Please follow these steps:

1. Create a new file in `src/i18n/locales/[language-code].ts`
2. Use the translation template above
3. Add your locale to the `SupportedLocales` enum in `src/i18n/types.ts`
4. Import and register your translation in `src/i18n/manager.ts`
5. Export your translation from `src/i18n/index.ts`
6. Submit a pull request

## Notes

- Translations use placeholder syntax `{paramName}` for dynamic values
- The default locale is English (`en`)
- If a translation is not found, the library falls back to English
- Locale detection is based on the browser's `navigator.language` property
